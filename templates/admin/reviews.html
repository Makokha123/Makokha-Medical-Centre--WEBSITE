{% extends "admin/base.html" %}

{% block title %}Manage Reviews - Admin Panel{% endblock %}
{% block page_title %}Patient Reviews{% endblock %}

{% block content %}
<div class="admin-list-header">
    <div class="admin-list-title">
        <h1><i class="fas fa-star"></i> Reviews</h1>
        <p>Monitor patient feedback and remove inappropriate submissions when required.</p>
    </div>
</div>

{% if reviews %}
<div class="admin-review-list">
    {% for review in reviews %}
    <article class="admin-review-card">
        <div class="admin-review-top">
            <div>
                <div class="admin-review-author">{{ review.patient_name }}</div>
                <div class="admin-review-email">{{ review.patient_email }}</div>
            </div>
            <div class="admin-review-rating">
                {% for i in range(1, review.rating + 1) %}
                    <i class="fas fa-star"></i>
                {% endfor %}
            </div>
        </div>

        <p class="admin-review-text">"{{ review.review_text }}"</p>

        <div class="admin-review-meta">
            <span class="admin-review-date">{{ review.created_at.strftime('%B %d, %Y at %I:%M %p') }}</span>
            <form method="POST" action="{{ url_for('admin_delete_review', review_id=review.id) }}" class="admin-inline-form" onsubmit="return confirm('Delete this review?');">
                <button type="submit" class="admin-btn-inline admin-btn-delete">
                    <i class="fas fa-trash"></i> Delete
                </button>
            </form>
        </div>
    </article>
    {% endfor %}
</div>
{% else %}
<div class="admin-empty-state">
    <i class="fas fa-star-half-alt"></i>
    <p>No patient reviews yet.</p>
</div>
{% endif %}
{% endblock %}
